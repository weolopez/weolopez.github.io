<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
    <title>Mobile Score Keeper - Web Component</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            overscroll-behavior: none; /* Prevents pull-to-refresh on mobile */
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        score-component {
            display: block;
            flex: 1;
        }
        
        score-toolbar {
            display: block;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Score Component with configurable attributes -->
        <score-component
            id="scoreKeeper"
            num-players="5"
            player-names="Team 1,Team 2,Team 3"
            player-colors="sky,rose,emerald"
            show-dealer="true"
            show-running-total="true"
            max-name-length="15"
            allow-negative-scores="false">
        </score-component>

        <sliding-panel direction="right" toggle-key="ArrowRight" animation-duration="0.8s" easing="cubic-bezier(0.68, -0.55, 0.27, 1.55)"
        background-color="rgba(50, 50, 50, 0.9)">
        <!-- Toolbar Component -->
            <score-toolbar
                id="scoreToolbar"
                show-next-round="true"
                show-reset="true"
                next-round-text="Next Round"
                reset-text="Reset All">
            </score-toolbar>
        </sliding-panel>
    </div>

    <!-- Load the web components -->
    <script src="score-component.js"></script>
    <script src="score-toolbar.js"></script>
    <script src="/wc/sliding-panel.js"></script>
    <!-- Example of listening to custom events -->
    <script>
        const scoreKeeper = document.getElementById('scoreKeeper');
        const scoreToolbar = document.getElementById('scoreToolbar');
        
        // Connect toolbar events to score component
        scoreToolbar.addEventListener('next-round-clicked', () => {
            scoreKeeper.processNextRound();
        });
        
        scoreToolbar.addEventListener('reset-clicked', () => {
            scoreKeeper.resetGame();
        });
        
        // Listen for score changes
        scoreKeeper.addEventListener('score-changed', (event) => {
            console.log('Score changed:', event.detail);
            // You can add custom logic here, like saving to localStorage
        });
        
        // Listen for next round events
        scoreKeeper.addEventListener('next-round', (event) => {
            console.log('Next round processed:', event.detail);
            // You can add custom logic here, like analytics tracking
        });
        
        // Listen for game reset events
        scoreKeeper.addEventListener('game-reset', (event) => {
            console.log('Game reset:', event.detail);
            // You can add custom logic here
        });
        
        // Listen for dealer changes
        scoreKeeper.addEventListener('dealer-changed', (event) => {
            console.log('Dealer changed to player:', event.detail.currentDealer);
        });
        
        // Listen for player name changes
        scoreKeeper.addEventListener('player-name-changed', (event) => {
            console.log('Player name changed:', event.detail);
        });
        
        // Example of programmatically controlling the component
        function demonstrateAPI() {
            // Get current game state
            const gameState = scoreKeeper.getGameState();
            console.log('Current game state:', gameState);
            
            // Set a specific score
            // scoreKeeper.setPlayerScore(1, 10);
            
            // Process next round programmatically
            // scoreKeeper.processNextRound();
            
            // Reset game programmatically
            // scoreKeeper.resetGame();
        }
        
        // Uncomment to test the API
        // setTimeout(demonstrateAPI, 2000);
    </script>
</body>
</html>
